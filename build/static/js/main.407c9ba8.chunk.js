(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{115:function(e,t,a){"use strict";a.r(t);var n=a(2),s=a.n(n),c=a(19),i=a.n(c),o=(a(78),a(32)),r=a.n(o),l=a(1),u=function(e){return Object(l.jsx)("section",{className:r.a.Header,children:Object(l.jsxs)("div",{className:r.a.heading,children:[Object(l.jsx)("h1",{className:r.a.TextHeading,children:"PalmTree Getaways"}),Object(l.jsx)("p",{children:"Browse, Book, Relax..."})]})})},d=a(25),j=a.n(d),b=function(e){return Object(l.jsxs)("section",{className:j.a.AboutUs,children:[Object(l.jsx)("h1",{children:"About us"}),Object(l.jsxs)("div",{className:j.a.part1,children:[Object(l.jsx)("h2",{children:"What we do"}),Object(l.jsx)("p",{className:j.a.para1,children:"We have a variety of luxury villas and houses available for you to rent! We aim to provide you with only the best, at the lowest possible prices. From browsing online to relaxing on the beach, we make it an intuitive and easy process."})]}),Object(l.jsxs)("div",{className:j.a.part2,children:[Object(l.jsx)("h2",{children:"1, 2, 3"}),Object(l.jsx)("p",{className:j.a.para2,children:"Simply browse for a listing, make a booking, relax!"})]})]})},h=a(10),g=a(26),m=a.n(g),p=function(e){return Object(l.jsxs)("section",{className:m.a.Listings,children:[Object(l.jsx)("h1",{children:"Our available properties"}),Object(l.jsx)("div",{className:m.a.Image1}),Object(l.jsx)("div",{className:m.a.Image2}),Object(l.jsx)("div",{className:m.a.Image3}),Object(l.jsx)("h2",{children:"Think you deserve a getaway? Browse our listings!"}),Object(l.jsx)("p",{className:m.a.para1,children:"Explore our listings, whether you're just here to browse or considering making a booking we are sure our getaways will satisfy you!"}),Object(l.jsx)(h.b,{to:"/getaways",children:"View our getaways"})]})},O=a(20),x=a.n(O),f=a.p+"static/media/user.2fda6558.png",_=a(17),w=[1,2,3,4,5],v=function(e){return Object(l.jsxs)("section",{className:x.a.Reviews,children:[Object(l.jsx)("h1",{children:"What our customers say"}),Object(l.jsxs)("div",{className:x.a.Review,children:[Object(l.jsx)("img",{src:f,alt:"userPhoto"}),Object(l.jsx)("ul",{children:w.map((function(e,t){return t<5?Object(l.jsx)(_.a,{className:x.a.icon},t*Math.random()):Object(l.jsx)(_.b,{})}))}),Object(l.jsxs)("p",{children:["Amazing services! I decided to book a viewing before renting, and it was amazing! Went ahead and booked it for 2 nights, best getaway I've had!"," "]})]}),Object(l.jsxs)("div",{className:x.a.Review,children:[Object(l.jsx)("img",{src:f,alt:"userPhoto"}),Object(l.jsx)("ul",{children:w.map((function(e,t){return t<5?Object(l.jsx)(_.a,{className:x.a.icon},t*Math.random()):Object(l.jsx)(_.b,{})}))}),Object(l.jsxs)("p",{children:["Amazing services! I decided to book a viewing before renting, and it was amazing! Went ahead and booked it for 2 nights, best getaway I've had!"," "]})]}),Object(l.jsxs)("div",{className:x.a.Review,children:[Object(l.jsx)("img",{src:f,alt:"userPhoto"}),Object(l.jsx)("ul",{children:w.map((function(e,t){return t<5?Object(l.jsx)(_.a,{className:x.a.icon},t*Math.random()):Object(l.jsx)(_.b,{})}))}),Object(l.jsxs)("p",{children:["Amazing services! I decided to book a viewing before renting, and it was amazing! Went ahead and booked it for 2 nights, best getaway I've had!"," "]})]})]})},y=function(e){return Object(n.useEffect)((function(){e.about?window.scrollTo({top:window.innerHeight,behavior:"smooth"}):window.scrollTo({top:0,behavior:"smooth"})}),[e.about]),Object(l.jsxs)(s.a.Fragment,{children:[Object(l.jsx)(u,{}),Object(l.jsx)(b,{}),Object(l.jsx)(p,{}),Object(l.jsx)(v,{})]})},N=a(59),k=a.n(N),P=a(6),F=a(60),A=a.n(F),C=function(e){return Object(l.jsx)("h1",{className:A.a.Header,children:e.heading})},B=a(5),I=a(23),S=a.n(I),T=a(61),D=a.n(T),M=function(){return Object(l.jsx)("div",{className:D.a.loader,children:"Loading..."})},L=a(7),E=a.n(L),R=a(62),W=a(63),H=a(31),V=a(33),U=a.n(V),q=function(e){var t={border:"1px solid #111111",color:"#bdbdbd",cursor:"not-allowed"};return Object(l.jsxs)("div",{className:U.a.PaginationButtons,children:[Object(l.jsx)("button",{className:U.a.PrevBtn,onClick:function(){return e.pageClick("prev")},disabled:!e.dynPage.hasPrevPage,style:e.dynPage.hasPrevPage?null:t,children:"Prev"}),Object(l.jsx)("button",{className:U.a.NextBtn,onClick:function(){return e.pageClick("next")},disabled:!e.dynPage.hasNextPage,style:e.dynPage.hasNextPage?null:t,children:"Next"})]})},z=[1,2,3,4,5],J=function(e){var t=Object(n.useState)(null),a=Object(B.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(!1),r=Object(B.a)(o,2),u=r[0],d=r[1],j=Object(n.useState)({page:1,hasPrevPage:!1,hasNextPage:!0}),b=Object(B.a)(j,2),g=b[0],m=b[1];Object(n.useEffect)((function(){return E.a.post("/api/getaways/all",{requestedPage:1}).then((function(e){i(e.data.data.docs),d(!0),m({page:e.data.data.page,hasPrevPage:e.data.data.hasPrevPage,hasNextPage:e.data.data.hasNextPage})})),function(){}}),[]);var p,O=function(e){window.scrollTo({top:0,behavior:"smooth"}),"prev"===e?(i(null),d(!1),E.a.post("/api/getaways/all",{requestedPage:g.page-1}).then((function(e){i(e.data.data.docs),d(!0),m({page:e.data.data.page,hasPrevPage:e.data.data.hasPrevPage,hasNextPage:e.data.data.hasNextPage})}))):(i(null),d(!1),E.a.post("/api/getaways/all",{requestedPage:g.page+1}).then((function(e){i((function(t){return e.data.data.docs})),d(!0),m({page:e.data.data.page,hasPrevPage:e.data.data.hasPrevPage,hasNextPage:e.data.data.hasNextPage})})))};return p=c?c.map((function(e,t){return Object(l.jsxs)("div",{className:S.a.result,children:[Object(l.jsx)("div",{className:S.a.Image,children:Object(l.jsx)("img",{src:"/listings/".concat(e.coverImage),alt:"coverImage"})}),Object(l.jsx)("h1",{children:e.name.replaceAll("-"," ")}),Object(l.jsx)("span",{children:z.map((function(t,a){return t<=+e.ratingsAverage?Object(l.jsx)(_.a,{},t+a):Object(l.jsx)(_.b,{},t+a)}))}),Object(l.jsx)("div",{className:S.a.LocationPrice,children:Object(l.jsxs)("p",{children:[Object(l.jsx)(R.a,{})," ",e.location]})}),Object(l.jsx)("div",{className:S.a.FitsBeach,children:Object(l.jsxs)("p",{children:[Object(l.jsx)(W.a,{})," ",e.detail.bedrooms," People"]})}),Object(l.jsxs)("p",{className:S.a.Price,children:["Price Per Night: \xa3",e.pricePerNight]}),Object(l.jsx)(h.b,{to:"/getaways/".concat(e.slug),children:"View"})]},e.name+t)})):Object(l.jsx)(M,{}),Object(l.jsx)(s.a.Fragment,{children:c?Object(l.jsx)(H.a,{in:u,timeout:500,children:function(e){return Object(l.jsxs)(s.a.Fragment,{children:[Object(l.jsx)("div",{style:{opacity:"entered"===e?1:0,transition:"all 0.5s"},className:S.a.Results,children:c?p:null}),Object(l.jsx)(q,{dynPage:g,pageClick:function(e){return O(e)}})]})}}):Object(l.jsx)(M,{})})},Y=s.a.memo(J),G=function(e){return Object(l.jsxs)(s.a.Fragment,{children:[Object(l.jsx)(C,{heading:"Browse Getaways"}),Object(l.jsx)(Y,{})]})},K=a(15),Q=a.n(K),Z=a(22),X=a(73),$=a(14),ee=a.n($),te=a(42),ae=a(43),ne=a(68),se=a(69),ce=a(72),ie=a(64),oe=(a(111),a(112),a(16)),re=a(34),le=a.n(re),ue=function(e){var t=Math.ceil((e.selectedDates[1]-e.selectedDates[0])/24/60/60/1e3),a=e.bookingDetails.pricePerNight*t,n="".concat(e.monthsRef[e.selectedDates[0].getMonth()]," ").concat(e.selectedDates[0].getDate()," ").concat(e.selectedDates[0].getFullYear()),s="".concat(e.monthsRef[e.selectedDates[1].getMonth()]," ").concat(e.selectedDates[1].getDate()," ").concat(e.selectedDates[1].getFullYear());return Object(l.jsxs)("div",{className:le.a.confirmModal,children:[Object(l.jsx)("h1",{children:"Booking Confirmation"}),Object(l.jsxs)("p",{children:[Object(l.jsx)("strong",{children:"Booking for: "}),e.bookingDetails.name.replaceAll("-"," ")]}),Object(l.jsxs)("p",{children:[Object(l.jsx)("strong",{children:"Selected Dates: "}),n," to ",s]}),Object(l.jsxs)("p",{children:[Object(l.jsx)("strong",{children:"Days booked: "}),t]}),Object(l.jsxs)("p",{children:[Object(l.jsx)("strong",{children:"Total Price: "}),"\xa3",a]}),Object(l.jsx)("button",{className:le.a.ConfirmBtn,onClick:function(){return e.confirmBooking({datesBooked:[n,s],totalPrice:a,days:t})},children:"PLACE BOOKING"}),Object(l.jsx)("button",{className:le.a.CancelBtn,onClick:e.closeModal,children:"CANCEL"})]})},de=a(67),je=a(41),be=a.n(je),he=function(e){return Object(l.jsx)("div",{className:"fail"===e.restype?be.a.Error:be.a.Success,children:Object(l.jsx)("h1",{children:e.message})})},ge=Object(de.a)("pk_test_51IVn2EJplsnbYwYSCOFxSKQOqmbCq14eHi2eY0onKhw81xQ4JQqsec51K5E0KEQEbzymD5lStwpk8RkuzAZiLG6k00uJtMyPip"),me=Object(oe.b)((function(e){return{isAuth:e.isAuth}}))(Object(P.f)((function(e){var t=Object(n.useState)(null),a=Object(B.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(null),r=Object(B.a)(o,2),u=r[0],d=r[1],j=Object(n.useState)(!1),b=Object(B.a)(j,2),h=b[0],g=b[1],m=Object(n.useState)([]),p=Object(B.a)(m,2),O=p[0],x=p[1],f=Object(n.useState)(null),_=Object(B.a)(f,2),w=_[0],v=_[1],y=Object(n.useState)(!1),N=Object(B.a)(y,2),k=N[0],P=N[1];Object(n.useEffect)((function(){E.a.get("/api/getaways/".concat(e.mongoId)).then((function(e){e.data.data&&(i(e.data.data),d([e.data.data.coverImage].concat(Object(X.a)(e.data.data.images))))}))}),[e.mongoId]);var F=function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n,s;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(null),d(null),a={listingId:c._id,fromDate:t.datesBooked[0],toDate:t.datesBooked[1],totalPrice:t.totalPrice,days:t.days,slug:c.slug},e.next=5,E.a.post("/api/bookings/checkout",a);case 5:return n=e.sent,e.next=8,ge;case 8:s=e.sent,s.redirectToCheckout({sessionId:n.data.sessionId}).error&&(P(!0),setTimeout((function(){P(!1)}),2e3));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){w&&v(null)},C={verticalAlign:"text-top",width:"20px",height:"20px",padding:"5px",marginTop:"-4px"},I={verticalAlign:"text-bottom",color:"green"},S=["January","February","March","April","May","June","July","August","September","October","November","December"],T=Object(l.jsx)(M,{});return u&&(T=Object(l.jsxs)(s.a.Fragment,{children:[Object(l.jsx)("div",{className:ee.a.CarouselContainer,children:Object(l.jsx)(ie.Carousel,{showStatus:!1,showThumbs:!1,transitionTime:600,renderArrowPrev:function(e,t,a){return t&&Object(l.jsx)(te.a,{className:ee.a.CarouselLeft,onClick:e})},renderArrowNext:function(e,t,a){return t&&Object(l.jsx)(te.b,{className:ee.a.CarouselRight,onClick:e})},children:u.map((function(e,t){return Object(l.jsx)("div",{children:Object(l.jsx)("img",{src:"/listings/".concat(e),alt:"databasePhoto"})},e+t)}))})}),Object(l.jsxs)("div",{className:ee.a.DataView,children:[Object(l.jsx)("h1",{children:c.name.replaceAll("-"," ")}),Object(l.jsxs)("h3",{children:[Object(l.jsx)(ae.b,{style:C})," Average Rating:"," ",Object(l.jsxs)("strong",{children:[c.ratingsAverage," / 5"]})]}),Object(l.jsxs)("h3",{children:[Object(l.jsx)(ne.a,{style:C})," Price Per Night:"," ",Object(l.jsxs)("strong",{children:["\xa3",c.pricePerNight]})]}),Object(l.jsxs)("h3",{children:[Object(l.jsx)(ae.a,{style:C})," Location:"," ",Object(l.jsx)("strong",{children:c.location})]}),Object.entries(c.detail).map((function(e){var t=Object(B.a)(e,2),a=t[0],n=t[1];return Object(l.jsxs)("p",{children:[a.includes("_")?a.replace("_"," "):a,":"," ","boolean"===typeof n?n?Object(l.jsx)(se.a,{style:I}):"No":Object(l.jsx)("strong",{children:n})]},a+n)})),Object(l.jsx)("h2",{children:"Are you ready for your dream getaway ? Book now!"}),e.isAuth?Object(l.jsxs)(s.a.Fragment,{children:[Object(l.jsxs)("div",{className:ee.a.FromFields,children:[Object(l.jsx)("span",{className:ee.a.labelFrom,children:"From"}),Object(l.jsx)("input",{placeholder:"From",className:ee.a.FromInput,value:0===O.length?"From":"".concat(S[new Date(O[0]).getMonth()]," ").concat(new Date(O[0]).getDate()," ").concat(new Date(O[0]).getFullYear()),onChange:function(){},contentEditable:!1})]}),Object(l.jsxs)("div",{className:ee.a.ToFields,children:[Object(l.jsx)("span",{className:ee.a.labelTo,children:"To"}),Object(l.jsx)("input",{placeholder:"To",className:ee.a.ToInput,value:0===O.length?"To":"".concat(S[new Date(O[1]).getMonth()]," ").concat(new Date(O[1]).getDate()," ").concat(new Date(O[1]).getFullYear()),onChange:function(){},contentEditable:!1})]}),Object(l.jsx)("button",{onClick:h?function(){window.scrollTo({top:0,behavior:"smooth"}),v(!0)}:function(){g(!h),window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})},disabled:0===O.length&&h,style:0===O.length&&h?{backgroundColor:"#bdbdbd",cursor:"not-allowed",opacity:.5,border:"none"}:null,children:h?"Book now":"Select Dates"})]}):Object(l.jsx)("button",{onClick:function(){e.history.push("/signup")},children:"Sign up to book"})]})]})),Object(l.jsxs)(s.a.Fragment,{children:[c?Object(l.jsx)(H.a,{in:null!==u,transitionTime:500,timeout:50,children:function(e){return Object(l.jsxs)("div",{style:{transform:"entered"===e?"scale(1)":"scale(0)",transition:"all 1s"},children:[w?Object(l.jsx)(ue,{monthsRef:S,selectedDates:O,bookingDetails:c,confirmBooking:function(e){return F(e)},closeModal:A}):null,k?Object(l.jsx)(he,{restype:"fail",message:"Unable to connect to checkout"}):null,T]})}}):Object(l.jsx)(M,{}),h&&u?Object(l.jsx)(ce.a,{className:ee.a.Calender,selectRange:!0,onChange:function(e){x(e)}}):null]})}))),pe=function(e){return Object(l.jsxs)(s.a.Fragment,{children:[Object(l.jsx)(C,{heading:"Take a look!"}),Object(l.jsx)(me,{mongoId:e.match.params.id}),Object(l.jsx)("div",{style:{height:"200px"}})]})},Oe=function(e){return Object(n.useEffect)((function(){window.scrollTo({top:0,behavior:"smooth"})}),[]),Object(l.jsx)("section",{className:k.a.Getaways,children:Object(l.jsxs)(P.c,{children:[Object(l.jsx)(P.a,{path:"/getaways/:id",component:pe}),Object(l.jsx)(P.a,{path:"/getaways",exact:!0,component:G})]})})},xe=a(27),fe=a.n(xe),_e="SET_IS_AUTH",we=function(e){return function(t){e?t({type:_e,value:e}):E.a.get("/api/authenticate/logout").then((function(a){t({type:_e,value:e})})).catch((function(e){}))}},ve=Object(oe.b)((function(e){return{isAuth:e.isAuth}}),(function(e){return{setIsAuth:function(t){return e(we(t))}}}))((function(e){var t=Object(n.useState)(!1),a=Object(B.a)(t,2),c=a[0],i=a[1],o=function(){i(!c)};return Object(l.jsxs)(s.a.Fragment,{children:[Object(l.jsx)("span",{onClick:o,className:fe.a.MobileNavBtn}),Object(l.jsxs)("section",{onClick:o,className:[fe.a.Navigation,c?null:fe.a.hidden].join(" "),children:[Object(l.jsx)("span",{className:fe.a.Logo,children:Object(l.jsx)("img",{src:"/logo.png",alt:"Logo"})}),Object(l.jsxs)("ul",{className:fe.a.NavigationList,children:[Object(l.jsx)(h.b,{to:"/",children:"Home"}),Object(l.jsx)(h.b,{to:"/about-us",children:"About us"}),Object(l.jsx)(h.b,{to:"/getaways",children:"Getaways"}),e.isAuth?Object(l.jsx)(h.b,{to:"/myaccount",children:"My Account"}):null,Object(l.jsx)(h.b,{to:e.isAuth?"/":"/signup",onClick:function(){e.setIsAuth(!1)},children:e.isAuth?"Logout":"Sign Up / Login"})]})]})]})})),ye=a(70),Ne=a.n(ye),ke=function(e){return Object(l.jsxs)("section",{className:Ne.a.Footer,children:[Object(l.jsx)("h3",{children:"Palm Properties"}),Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{children:"Facebook"}),Object(l.jsx)("li",{children:"Instagram"}),Object(l.jsx)("li",{children:"Twitter"})]}),Object(l.jsx)("p",{children:"Copyright by Lewis Yates"})]})},Pe=function(e){return Object(l.jsxs)(s.a.Fragment,{children:[Object(l.jsx)(ve,{}),e.children,Object(l.jsx)(ke,{})]})},Fe=a(18),Ae=a.n(Fe),Ce=function(e){var t=Object(n.useState)("signup"),a=Object(B.a)(t,2),s=a[0],c=a[1];return Object(l.jsx)("div",{className:Ae.a.WindowContainer,children:Object(l.jsxs)("div",{className:Ae.a.Window,children:[Object(l.jsx)("h1",{className:Ae.a.Title,children:"signup"===s?"Sign up":"Log in"}),Object(l.jsxs)("form",{className:Ae.a.Form,onSubmit:function(t){t.preventDefault();var a=document.querySelectorAll("input");"login"===s?e.clickHandler({email:a[0].value,pass:a[1].value,method:"login"}):e.clickHandler({name:a[0].value,email:a[1].value,pass:a[2].value,passConfirm:a[3].value,method:"signup"})},children:["signup"===s?Object(l.jsxs)("div",{className:Ae.a.Field,children:[Object(l.jsx)("label",{htmlFor:"name",children:"Your name"}),Object(l.jsx)("input",{id:"name",type:"text",required:!0})]}):null,Object(l.jsxs)("div",{className:Ae.a.Field,children:[Object(l.jsx)("label",{htmlFor:"email",children:"Email Address"}),Object(l.jsx)("input",{id:"email",type:"email",required:!0})]}),Object(l.jsxs)("div",{className:Ae.a.Field,children:[Object(l.jsx)("label",{htmlFor:"password",children:"Password"}),Object(l.jsx)("input",{id:"password",type:"password",required:!0,minLength:"8"})]}),"signup"===s?Object(l.jsxs)("div",{className:Ae.a.Field,children:[Object(l.jsx)("label",{htmlFor:"passwordConfirm",children:"Password Confirm"}),Object(l.jsx)("input",{id:"passwordConfirm",type:"password",required:!0,minLength:"8"})]}):null,Object(l.jsx)("button",{children:"signup"===s?"Sign up":"Log in"})]}),Object(l.jsxs)("h2",{children:["signup"===s?"Already have an account?":"Don't have an account?"," ",Object(l.jsx)("span",{className:Ae.a.switchAuth,onClick:function(){c("signup"===s?"login":"signup")},children:"signup"===s?"Log in":"Sign up"})]})]})})},Be=Object(oe.b)(null,(function(e){return{setIsAuthorized:function(t){return e(we(t))}}}))((function(e){var t=Object(n.useState)(null),a=Object(B.a)(t,2),c=a[0],i=a[1];Object(n.useEffect)((function(){return function(){i(null)}}),[]);var o=function(e){i({status:"fail",message:e}),setTimeout((function(){i(null)}),2e3)},r=function(t){i({status:"success",message:t}),e.setIsAuthorized(!0),setTimeout((function(){e.history.replace("/")}),2e3)},u=function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.scrollTo({top:0,behavior:"smooth"}),a={name:t.name,email:t.email,password:t.pass,passwordConfirm:t.passConfirm},"signup"===t.method?E.a.post("/api/authenticate/signup",a).then((function(e){if("failed"===e.data.status)o(e.data.message);else{var a="signup"===t.method?"Successfully signed up!":"Successfully logged in!";r(a)}})).catch((function(e){o("Something went wrong!")})):E.a.post("/api/authenticate/login",a).then((function(e){if("failed"===e.data.status)o(e.data.message);else{var a="signup"===t.method?"Successfully signed up!":"Successfully logged in!";r(a)}})).catch((function(e){o("Something went wrong!")}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=null;return c&&(d="fail"===c.status?Object(l.jsx)(he,{restype:"fail",message:c.message}):Object(l.jsx)(he,{restype:"success",message:c.message})),Object(l.jsxs)(s.a.Fragment,{children:[d,Object(l.jsx)(Ce,{clickHandler:u})]})})),Ie=a(21),Se=a.n(Ie),Te=a(35),De=a.n(Te),Me=function(e){var t=Object(n.useState)("bookings"),a=Object(B.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(null),r=Object(B.a)(o,2),u=r[0],d=r[1],j=Object(n.useState)(null),b=Object(B.a)(j,2),h=b[0],g=b[1],m=Object(n.useState)(null),p=Object(B.a)(m,2),O=p[0],x=p[1],f=Object(n.useState)(null),_=Object(B.a)(f,2),w=_[0],v=_[1],y=function(t){u&&d(null),x(t.message),setTimeout((function(){x(null),e.history.replace("/")}),2e3)};Object(n.useEffect)((function(){E.a.get("/api/users/me").then((function(e){var t;"success"===e.data.status?(t=e.data,d({name:t.data.name,email:t.data.email})):y(e.data)})),E.a.get("/api/bookings/mybookings").then((function(e){"success"===e.data.status?g(e.data.data):y({data:"Something went wrong!"})}))}),[]);var N=function(e){c!==e&&i(e)},k=function(){window.scrollTo({top:0,behavior:"smooth"})},P=function(){document.querySelectorAll("input").forEach((function(e){e.value=""}))},F=function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=document.getElementById("updateDetailsName").value,n=document.getElementById("updateDetailsEmail").value,E.a.post("/api/users/updateme",{name:a,email:n}).then((function(e){"success"===e.data.status?(v("Details updated!"),P(),d({name:a,email:n}),k(),setTimeout((function(){v(null)}),2e3)):y({message:"Something went wrong!"})}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n,s;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=document.getElementById("updatePassCurrent").value,n=document.getElementById("updatePassNew").value,s=document.getElementById("updatePassNewConfirm").value,E.a.post("/api/users/updatemypass",{currentPassword:a,newPassword:n,newPasswordConfirm:s}).then((function(e){"success"===e.data.status?(v("Password updated!"),P(),k(),setTimeout((function(){v(null)}),2e3)):(x(e.data.message),k(),P(),setTimeout((function(){x(null)}),2e3))}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=Object(l.jsx)(M,{});return"account"===c?C=Object(l.jsxs)(s.a.Fragment,{children:[Object(l.jsxs)("form",{className:Se.a.detailsForm,onSubmit:F,children:[Object(l.jsx)("h3",{children:"Update Details"}),Object(l.jsx)("label",{children:"Update Name"}),Object(l.jsx)("input",{type:"text",placeholder:u?u.name:"New name",required:!0,onChange:function(){},id:"updateDetailsName"}),Object(l.jsx)("label",{children:"Update Email"}),Object(l.jsx)("input",{type:"email",placeholder:u?u.email:"New email",required:!0,onChange:function(){},id:"updateDetailsEmail"}),Object(l.jsx)("button",{children:"Submit"})]}),Object(l.jsxs)("form",{className:Se.a.updatePassForm,onSubmit:A,children:[Object(l.jsx)("h3",{children:"Update Password"}),Object(l.jsx)("label",{children:"Current Password"}),Object(l.jsx)("input",{type:"password",placeholder:"Current password",required:!0,minLength:"8",id:"updatePassCurrent"}),Object(l.jsx)("label",{children:"New Password"}),Object(l.jsx)("input",{type:"password",placeholder:"New password",required:!0,minLength:"8",id:"updatePassNew"}),Object(l.jsx)("label",{children:"Confirm Password"}),Object(l.jsx)("input",{type:"password",placeholder:"Confirm password",required:!0,minLength:"8",id:"updatePassNewConfirm"}),Object(l.jsx)("button",{children:"Submit"})]}),Object(l.jsx)("h4",{children:"For security reasons regarding bookings, if you would like to delete your account please contact us at support@palmtree-getaways.com"})]}):h&&(C=0===h.length?Object(l.jsx)("p",{className:De.a.NoBookings,children:"You have no bookings yet!"}):Object(l.jsxs)(s.a.Fragment,{children:[Object(l.jsx)("h6",{className:De.a.BookingTitle,children:"My bookings"}),h.map((function(e,t){return Object(l.jsxs)("div",{className:De.a.Booking,children:[Object(l.jsx)("h5",{children:e.listingId.name.replaceAll("-"," ")}),Object(l.jsxs)("p",{children:[Object(l.jsx)("strong",{children:"Booked Dates: "}),e.datesBooked[0]," to ",e.datesBooked[1]]}),Object(l.jsxs)("p",{children:[Object(l.jsx)("strong",{children:"Total Price: "}),"\xa3",e.totalPrice]}),Object(l.jsx)("img",{src:"/listings/".concat(e.listingId.coverImage),alt:"bookingImage"})]},t+Math.random())}))]})),Object(l.jsxs)("section",{className:Se.a.MyAccount,children:[O?Object(l.jsx)(he,{restype:"fail",message:O}):null,w?Object(l.jsx)(he,{restype:"success",message:w}):null,Object(l.jsx)("h1",{children:"My Account"}),Object(l.jsxs)("div",{className:Se.a.accountWindow,children:[Object(l.jsxs)("div",{className:Se.a.Sidebar,children:[Object(l.jsx)("h2",{className:"bookings"===c?Se.a.Active:null,onClick:function(){return N("bookings")},children:"My Bookings"}),Object(l.jsx)("h2",{className:"account"===c?Se.a.Active:null,onClick:function(){return N("account")},children:"Update Account"})]}),C]})]})},Le=function(e){var t=Object(n.useCallback)((function(){e.setIsAuth(!0)}),[e]),a=Object(n.useCallback)((function(){e.setIsAuth(!1)}),[e]);return Object(n.useEffect)((function(){E.a.get("/api/authenticate/isauth").then((function(e){"success"===e.data.status?t():a()})).catch((function(e){}))}),[t,a]),Object(l.jsx)(h.a,{children:Object(l.jsx)(Pe,{children:Object(l.jsxs)(P.c,{children:[Object(l.jsx)(P.a,{path:"/getaways",component:Oe}),Object(l.jsx)(P.a,{path:"/signup",component:Be}),Object(l.jsx)(P.a,{path:"/about-us",component:function(){return Object(l.jsx)(y,{about:!0})}}),e.isAuth?Object(l.jsx)(P.a,{path:"/myaccount",component:Me}):null,Object(l.jsx)(P.a,{path:"/",component:y})]})})})},Ee=Object(oe.b)((function(e){return{isAuth:e.isAuth}}),(function(e){return{setIsAuth:function(t){return e(we(t))}}}))(s.a.memo(Le)),Re=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,117)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),s(e),c(e),i(e)}))},We=a(24),He={isAuth:!1},Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _e:return{isAuth:t.value};case"UNAUTHORIZE":return;default:return e}},Ue=a(71),qe=We.c,ze=Object(We.d)(Ve,qe(Object(We.a)(Ue.a)));i.a.render(Object(l.jsx)(oe.a,{store:ze,children:Object(l.jsx)(Ee,{})}),document.getElementById("root")),Re()},14:function(e,t,a){e.exports={View:"View_View__19c9Y",CarouselContainer:"View_CarouselContainer__1Ggfx",CarouselLeft:"View_CarouselLeft__1x_KQ",CarouselRight:"View_CarouselRight__3CHaF",DataView:"View_DataView__2iWo4",FromFields:"View_FromFields__2JSOB",ToFields:"View_ToFields__2x9ns",FromInput:"View_FromInput__3BDsf",ToInput:"View_ToInput__lQiKw",labelFrom:"View_labelFrom__2DV2g",labelTo:"View_labelTo__YV1Gz",bookButton:"View_bookButton__BhnZu",bookingAnimation:"View_bookingAnimation__3WExK",Calender:"View_Calender__Ij5IA",slideIn:"View_slideIn__EJ_0S"}},18:function(e,t,a){e.exports={WindowContainer:"Window_WindowContainer__35a3l",Window:"Window_Window__3_bN1",Form:"Window_Form__1b5MV",Title:"Window_Title__2gbhX",Field:"Window_Field__fFl0N",switchAuth:"Window_switchAuth__y_Net",invalid:"Window_invalid__3qUS_"}},20:function(e,t,a){e.exports={Reviews:"Reviews_Reviews__2iJFc",Review:"Reviews_Review__2_fFP",icon:"Reviews_icon__UzInZ"}},21:function(e,t,a){e.exports={MyAccount:"MyAccount_MyAccount__2UduL",accountWindow:"MyAccount_accountWindow__r-nMh",Sidebar:"MyAccount_Sidebar__ctWbp",Active:"MyAccount_Active__11x4g",detailsForm:"MyAccount_detailsForm__1t0oQ",updatePassForm:"MyAccount_updatePassForm__2kUno"}},23:function(e,t,a){e.exports={Results:"Results_Results__EXdZ1",result:"Results_result__1VrAd",Image:"Results_Image__1Y3FH",LocationPrice:"Results_LocationPrice__NAjJN",FitsBeach:"Results_FitsBeach__279X3",Price:"Results_Price__1X9jW"}},25:function(e,t,a){e.exports={AboutUs:"AboutUs_AboutUs__13ZjI",para1:"AboutUs_para1__1EcSz",para2:"AboutUs_para2__3k0af",part1:"AboutUs_part1__LtAOv",part2:"AboutUs_part2__2TDrk"}},26:function(e,t,a){e.exports={Listings:"Listings_Listings__2zttO",para1:"Listings_para1__2lMQr",Image1:"Listings_Image1__2orlN",Image2:"Listings_Image2__3qRsQ",Image3:"Listings_Image3__FKjbU"}},27:function(e,t,a){e.exports={Navigation:"Navigation_Navigation__3FfZx",Logo:"Navigation_Logo__b3MO2",NavigationList:"Navigation_NavigationList__1HuHx",MobileNavBtn:"Navigation_MobileNavBtn__118pp",hidden:"Navigation_hidden__4ymN4"}},32:function(e,t,a){e.exports={Header:"Header_Header__JOKFm",heading:"Header_heading__1AhlF",TextHeading:"Header_TextHeading__3cPDr"}},33:function(e,t,a){e.exports={PaginationButtons:"PageButtons_PaginationButtons__2jbuP",PrevBtn:"PageButtons_PrevBtn__18Mcm",NextBtn:"PageButtons_NextBtn__Bzc7Z"}},34:function(e,t,a){e.exports={confirmModal:"ConfirmModal_confirmModal__3oCFM",slideIn:"ConfirmModal_slideIn__jX0W3",CancelBtn:"ConfirmModal_CancelBtn__2LjMF",ConfirmBtn:"ConfirmModal_ConfirmBtn__3nYHF"}},35:function(e,t,a){e.exports={Booking:"Bookings_Booking__3MR4f",BookingTitle:"Bookings_BookingTitle__3OiFb",NoBookings:"Bookings_NoBookings__2A64d"}},41:function(e,t,a){e.exports={Error:"errorModal_Error__2rv3b",slideIn:"errorModal_slideIn__2rlCh",Success:"errorModal_Success__2aFjK"}},59:function(e,t,a){e.exports={Getaways:"Getaways_Getaways__2plNp"}},60:function(e,t,a){e.exports={Header:"Header_Header__2edTi"}},61:function(e,t,a){e.exports={loader:"Spinner_loader__2iQJF",load6:"Spinner_load6__2GTWw",round:"Spinner_round__6rgkL"}},70:function(e,t,a){e.exports={Footer:"Footer_Footer__3DcDj"}},78:function(e,t,a){}},[[115,1,2]]]);
//# sourceMappingURL=main.407c9ba8.chunk.js.map